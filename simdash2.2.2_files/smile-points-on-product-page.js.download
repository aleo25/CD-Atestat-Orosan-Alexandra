(()=>{"use strict";var e={6:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=l(n(956));t.default=function(e){var t=e.children,n=e.isVisible,r=void 0!==n&&n;return(0,a.jsx)("div",{className:"".concat(u.LoadingOverlay," ").concat(r?u["LoadingOverlay--visible"]:""),children:t})}},18:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(940),i=r(n(908));(0,o.triggerRender)("smile-points-on-product-page",i.default)},54:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pluralise=void 0;t.pluralise=function(e){var t=e.count,n=e.singular,r=e.plural;return 1===t?n:r}},75:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.injectVariablesIntoString=void 0;t.injectVariablesIntoString=function(e){var t=e.str;return e.variables.reduce((function(e,t){var n=t.name,r=t.value;return e.replace(new RegExp("\\[".concat(n,"\\]"),"g"),r)}),t)}},84:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=l(n(306)),c={deletion:"Deletion"},s={semiBold:"SemiBold"};t.default=function(e){var t=e.accessibilityRole,n=e.weight,r=e.children,o=[u.Text,t&&u["Text--accessibilityRole".concat(c[t])],n&&u["Text--weight".concat(s[n])]].filter(Boolean);return(0,a.jsx)("span",{className:o.join(" "),"aria-hidden":"deletion"===t,children:r})}},160:(e,t)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getClassNames=function(e){var t,r=e.baseClassName,o=e.propertyName,i=e.propertyOptions,l=e.value,a=e.styles;t="object"===n(l)?Object.keys(l).map((function(e){var t="default"===e?"":"".concat(e,":");return"".concat(r,"--").concat(t).concat(o).concat(i[l[e]])})):["".concat(r,"--").concat(o).concat(i[l])];return t.map((function(e){return a[e]})).join(" ")}},186:(e,t,n)=>{n.r(t),n.d(t,{PointsOnProductPage:()=>r,PointsOnProductPage__IconContainer:()=>o});var r="slp_1d97ce",o="slp_7cb0e2"},201:(e,t,n)=>{n.r(t),n.d(t,{Banner:()=>r,Banner__Icon:()=>o});var r="slp_42d747",o="slp_726d90"},274:(e,t,n)=>{n.r(t),n.d(t,{ContentContainer:()=>r});var r="slp_51a39c"},282:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterActivityRuleBonuses=void 0;t.filterActivityRuleBonuses=function(e){var t=e.activityRuleBonuses,n=e.filters,r=n.activityRuleId,o=n.endsAfter;return t.filter((function(e){var t=!r||e.activityRuleId===r,n=!o||new Date(e.endsAt)>o;return t&&n}))}},302:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(727),i=r(n(520));t.default=function(e){var t=e.alt,n=e.colour,r=e.size,l=void 0===r?30:r,a=e.name,u="https://".concat(i.default.PUBLIC_SMILE_API_HOST,"/v1/images/").concat(a,".svg?color=").concat(encodeURIComponent(n),"&colorize=true");return(0,o.jsx)("img",{alt:t,src:u,width:l,height:l})}},306:(e,t,n)=>{n.r(t),n.d(t,{Text:()=>r,"Text--accessibilityRoleDeletion":()=>o,"Text--weightSemiBold":()=>i});var r="slp_5f0014",o="slp_e257a7",i="slp_4425b3"},311:(e,t,n)=>{n.r(t),n.d(t,{Link:()=>r});var r="slp_aa8327"},374:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(727);t.default=function(e){var t=e.children;return(0,r.jsx)("div",{children:t})}},415:(e,t,n)=>{n.r(t),n.d(t,{Button:()=>r,"Button--primary":()=>o});var r="slp_6434b9",o="slp_ba31b4"},432:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=n(160),c=l(n(646));t.default=function(e){var t=e.children,n=e.direction,r=e.spacing,o=e.align,i=e.distribution,l=e.wrap,s=n?(0,u.getClassNames)({baseClassName:"LayoutStack",propertyName:"direction",propertyOptions:{default:"Row",row:"Row",column:"Column"},value:n,styles:c}):"",_=r?(0,u.getClassNames)({baseClassName:"LayoutStack",propertyName:"spacing",propertyOptions:{default:"Medium",small:"Small",medium:"Medium",large:"Large",extraLarge:"ExtraLarge"},value:r,styles:c}):"",f=o?(0,u.getClassNames)({baseClassName:"LayoutStack",propertyName:"align",propertyOptions:{default:"Normal",normal:"Normal",start:"Start",center:"Center"},value:o,styles:c}):"",d=i?(0,u.getClassNames)({baseClassName:"LayoutStack",propertyName:"distribution",propertyOptions:{default:"Auto",auto:"Auto",even:"Even",spaceBetween:"SpaceBetween"},value:i,styles:c}):"",p=l?c["LayoutStack--wrap"]:"";return(0,a.jsx)("div",{className:"".concat(c.LayoutStack," ").concat(s," ").concat(_," ").concat(f," ").concat(d," ").concat(p),children:t})}},446:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>k,Fragment:()=>S,cloneElement:()=>q,createContext:()=>Z,createElement:()=>P,createRef:()=>w,h:()=>P,hydrate:()=>z,isValidElement:()=>l,options:()=>o,render:()=>$,toChildArray:()=>D});var r,o,i,l,a,u,c,s,_,f,d,p,v,h={},y=[],b=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function g(e,t){for(var n in t)e[n]=t[n];return e}function O(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function P(e,t,n){var o,i,l,a={};for(l in t)"key"==l?o=t[l]:"ref"==l?i=t[l]:a[l]=t[l];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===a[l]&&(a[l]=e.defaultProps[l]);return j(e,a,o,i,null)}function j(e,t,n,r,l){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++i:l,__i:-1,__u:0};return null==l&&null!=o.vnode&&o.vnode(a),a}function w(){return{current:null}}function S(e){return e.children}function k(e,t){this.props=e,this.context=t}function x(e,t){if(null==t)return e.__?x(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?x(e):null}function L(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return L(e)}}function M(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!C.__r++||u!==o.debounceRendering)&&((u=o.debounceRendering)||c)(C)}function C(){var e,t,n,r,i,l,u,c;for(a.sort(s);e=a.shift();)e.__d&&(t=a.length,r=void 0,l=(i=(n=e).__v).__e,u=[],c=[],n.__P&&((r=g({},i)).__v=i.__v+1,o.vnode&&o.vnode(r),U(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[l]:null,u,null==l?x(i):l,!!(32&i.__u),c),r.__v=i.__v,r.__.__k[r.__i]=r,V(u,r,c),r.__e!=l&&L(r)),a.length>t&&a.sort(s));C.__r=0}function B(e,t,n,r,o,i,l,a,u,c,s){var _,f,d,p,v,b,m=r&&r.__k||y,g=t.length;for(u=N(n,t,m,u,g),_=0;_<g;_++)null!=(d=n.__k[_])&&(f=-1===d.__i?h:m[d.__i]||h,d.__i=_,b=U(e,d,f,o,i,l,a,u,c,s),p=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&W(f.ref,null,d),s.push(d.ref,d.__c||p,d)),null==v&&null!=p&&(v=p),4&d.__u||f.__k===d.__k?u=T(d,u,e):"function"==typeof d.type&&void 0!==b?u=b:p&&(u=p.nextSibling),d.__u&=-7);return n.__e=v,u}function N(e,t,n,r,o){var i,l,a,u,c,s=n.length,_=s,f=0;for(e.__k=new Array(o),i=0;i<o;i++)null!=(l=t[i])&&"boolean"!=typeof l&&"function"!=typeof l?(u=i+f,(l=e.__k[i]="string"==typeof l||"number"==typeof l||"bigint"==typeof l||l.constructor==String?j(null,l,null,null,null):m(l)?j(S,{children:l},null,null,null):void 0===l.constructor&&l.__b>0?j(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,a=null,-1!==(c=l.__i=R(l,n,u,_))&&(_--,(a=n[c])&&(a.__u|=2)),null==a||null===a.__v?(-1==c&&f--,"function"!=typeof l.type&&(l.__u|=4)):c!=u&&(c==u-1?f--:c==u+1?f++:(c>u?f--:f++,l.__u|=4))):e.__k[i]=null;if(_)for(i=0;i<s;i++)null!=(a=n[i])&&!(2&a.__u)&&(a.__e==r&&(r=x(a)),F(a,a));return r}function T(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=T(r[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=x(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function D(e,t){return t=t||[],null==e||"boolean"==typeof e||(m(e)?e.some((function(e){D(e,t)})):t.push(e)),t}function R(e,t,n,r){var o,i,l=e.key,a=e.type,u=t[n];if(null===u||u&&l==u.key&&a===u.type&&!(2&u.__u))return n;if(r>(null==u||2&u.__u?0:1))for(o=n-1,i=n+1;o>=0||i<t.length;){if(o>=0){if((u=t[o])&&!(2&u.__u)&&l==u.key&&a===u.type)return o;o--}if(i<t.length){if((u=t[i])&&!(2&u.__u)&&l==u.key&&a===u.type)return i;i++}}return-1}function E(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||b.test(t)?n:n+"px"}function I(e,t,n,r,o){var i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||E(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||E(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(_,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=f,e.addEventListener(t,i?p:d,i)):e.removeEventListener(t,i?p:d,i);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function A(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=f++;else if(t.t<n.u)return;return n(o.event?o.event(t):t)}}}function U(e,t,n,r,i,l,a,u,c,s){var _,f,d,p,v,h,y,b,P,j,w,x,L,M,C,N,T,D=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),l=[u=t.__e=n.__e]),(_=o.__b)&&_(t);e:if("function"==typeof D)try{if(b=t.props,P="prototype"in D&&D.prototype.render,j=(_=D.contextType)&&r[_.__c],w=_?j?j.props.value:_.__:r,n.__c?y=(f=t.__c=n.__c).__=f.__E:(P?t.__c=f=new D(b,w):(t.__c=f=new k(b,w),f.constructor=D,f.render=G),j&&j.sub(f),f.props=b,f.state||(f.state={}),f.context=w,f.__n=r,d=f.__d=!0,f.__h=[],f._sb=[]),P&&null==f.__s&&(f.__s=f.state),P&&null!=D.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=g({},f.__s)),g(f.__s,D.getDerivedStateFromProps(b,f.__s))),p=f.props,v=f.state,f.__v=t,d)P&&null==D.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),P&&null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(P&&null==D.getDerivedStateFromProps&&b!==p&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(b,w),!f.__e&&(null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(b,f.__s,w)||t.__v==n.__v)){for(t.__v!=n.__v&&(f.props=b,f.state=f.__s,f.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),x=0;x<f._sb.length;x++)f.__h.push(f._sb[x]);f._sb=[],f.__h.length&&a.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(b,f.__s,w),P&&null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(p,v,h)}))}if(f.context=w,f.props=b,f.__P=e,f.__e=!1,L=o.__r,M=0,P){for(f.state=f.__s,f.__d=!1,L&&L(t),_=f.render(f.props,f.state,f.context),C=0;C<f._sb.length;C++)f.__h.push(f._sb[C]);f._sb=[]}else do{f.__d=!1,L&&L(t),_=f.render(f.props,f.state,f.context),f.state=f.__s}while(f.__d&&++M<25);f.state=f.__s,null!=f.getChildContext&&(r=g(g({},r),f.getChildContext())),P&&!d&&null!=f.getSnapshotBeforeUpdate&&(h=f.getSnapshotBeforeUpdate(p,v)),u=B(e,m(N=null!=_&&_.type===S&&null==_.key?_.props.children:_)?N:[N],t,n,r,i,l,a,u,c,s),f.base=t.__e,t.__u&=-161,f.__h.length&&a.push(f),y&&(f.__E=f.__=null)}catch(e){if(t.__v=null,c||null!=l)if(e.then){for(t.__u|=c?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;l[l.indexOf(u)]=null,t.__e=u}else for(T=l.length;T--;)O(l[T]);else t.__e=n.__e,t.__k=n.__k;o.__e(e,t,n)}else null==l&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):u=t.__e=H(n.__e,t,n,r,i,l,a,c,s);return(_=o.diffed)&&_(t),128&t.__u?void 0:u}function V(e,t,n){for(var r=0;r<n.length;r++)W(n[r],n[++r],n[++r]);o.__c&&o.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){o.__e(e,t.__v)}}))}function H(e,t,n,i,l,a,u,c,s){var _,f,d,p,v,y,b,g=n.props,P=t.props,j=t.type;if("svg"==j?l="http://www.w3.org/2000/svg":"math"==j?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=a)for(_=0;_<a.length;_++)if((v=a[_])&&"setAttribute"in v==!!j&&(j?v.localName==j:3==v.nodeType)){e=v,a[_]=null;break}if(null==e){if(null==j)return document.createTextNode(P);e=document.createElementNS(l,j,P.is&&P),c&&(o.__m&&o.__m(t,a),c=!1),a=null}if(null===j)g===P||c&&e.data===P||(e.data=P);else{if(a=a&&r.call(e.childNodes),g=n.props||h,!c&&null!=a)for(g={},_=0;_<e.attributes.length;_++)g[(v=e.attributes[_]).name]=v.value;for(_ in g)if(v=g[_],"children"==_);else if("dangerouslySetInnerHTML"==_)d=v;else if(!(_ in P)){if("value"==_&&"defaultValue"in P||"checked"==_&&"defaultChecked"in P)continue;I(e,_,null,v,l)}for(_ in P)v=P[_],"children"==_?p=v:"dangerouslySetInnerHTML"==_?f=v:"value"==_?y=v:"checked"==_?b=v:c&&"function"!=typeof v||g[_]===v||I(e,_,v,g[_],l);if(f)c||d&&(f.__html===d.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(d&&(e.innerHTML=""),B(e,m(p)?p:[p],t,n,i,"foreignObject"==j?"http://www.w3.org/1999/xhtml":l,a,u,a?a[0]:n.__k&&x(n,0),c,s),null!=a)for(_=a.length;_--;)O(a[_]);c||(_="value","progress"==j&&null==y?e.removeAttribute("value"):void 0!==y&&(y!==e[_]||"progress"==j&&!y||"option"==j&&y!==g[_])&&I(e,_,y,g[_],l),_="checked",void 0!==b&&b!==e[_]&&I(e,_,b,g[_],l))}return e}function W(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){o.__e(e,n)}}function F(e,t,n){var r,i;if(o.unmount&&o.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||W(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){o.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&F(r[i],t,n||"function"!=typeof e.type);n||O(e.__e),e.__c=e.__=e.__e=void 0}function G(e,t,n){return this.constructor(e,n)}function $(e,t,n){var i,l,a,u;t==document&&(t=document.documentElement),o.__&&o.__(e,t),l=(i="function"==typeof n)?null:n&&n.__k||t.__k,a=[],u=[],U(t,e=(!i&&n||t).__k=P(S,null,[e]),l||h,h,t.namespaceURI,!i&&n?[n]:l?null:t.firstChild?r.call(t.childNodes):null,a,!i&&n?n:l?l.__e:t.firstChild,i,u),V(a,e,u)}function z(e,t){$(e,t,z)}function q(e,t,n){var o,i,l,a,u=g({},e.props);for(l in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)"key"==l?o=t[l]:"ref"==l?i=t[l]:u[l]=void 0===t[l]&&void 0!==a?a[l]:t[l];return arguments.length>2&&(u.children=arguments.length>3?r.call(arguments,2):n),j(e.type,u,o||e.key,i||e.ref,null)}function Z(e,t){var n={__c:t="__cC"+v++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach((function(e){e.__e=!0,M(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=y.slice,o={__e:function(e,t,n,r){for(var o,i,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),l=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),l=o.__d),l)return o.__E=o}catch(t){e=t}throw e}},i=0,l=function(e){return null!=e&&null==e.constructor},k.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=g({},this.state),"function"==typeof e&&(e=e(g({},n),this.props)),e&&g(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),M(this))},k.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),M(this))},k.prototype.render=S,a=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=function(e,t){return e.__v.__b-t.__v.__b},C.__r=0,_=/(PointerCapture)$|Capture$/i,f=0,d=A(!1),p=A(!0),v=0},463:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=n(467),c=n(929),s=n(75),_=l(n(834));t.default=function(e){var t=e.isGuest,n=e.canGuestsEarn,r=e.earnablePoints,o=e.earnablePointsBeforeBonus,i=e.pointsLabelSingular,l=e.pointsLabelPlural,f=e.previewScenario,d=e.shouldShowPointsLabel,p=e.pointsTextLoggedIn,v=e.pointsTextLoggedOut,h=o?"<del>".concat((0,u.formatNumber)(o),"</del> "):"",y="".concat(h).concat(function(e,t,n,r){return e?t?(0,c.formatPointsAmount)({pointsAmount:e,pointsLabelSingular:n,pointsLabelPlural:r,formatNumber:u.formatNumber}):(0,u.formatNumber)(e):t?r:""}(r,d,i,l)),b=[{name:"points_amount",value:y}],m=!!f?"log_in_required_to_earn_points"===f:t&&!n,g=(0,s.injectVariablesIntoString)({str:m?v:p,variables:b});return(0,a.jsx)("div",{className:_.BodyTextWrapper,dangerouslySetInnerHTML:{__html:g}})}},467:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumber=void 0;t.formatNumber=function(e){return e.toLocaleString()}},520:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={PUBLIC_SMILE_API_HOST:"platform.smile.io",PUBLIC_SMILE_UI_HOST:"js.smile.io"}},527:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=l(n(201));t.default=function(e){var t=e.children;return(0,a.jsxs)("div",{className:u.Banner,children:[(0,a.jsx)("div",{className:u.Banner__Icon}),(0,a.jsx)("div",{children:t})]})}},581:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=l(n(311));t.default=function(e){var t=e.to,n=e.ariaLabel,r=e.children;return(0,a.jsx)("a",{className:u.Link,href:t,"aria-label":n,children:r})}},646:(e,t,n)=>{n.r(t),n.d(t,{LayoutStack:()=>r,"LayoutStack--alignCenter":()=>o,"LayoutStack--alignNormal":()=>i,"LayoutStack--alignStart":()=>l,"LayoutStack--directionColumn":()=>a,"LayoutStack--directionRow":()=>u,"LayoutStack--distributionAuto":()=>c,"LayoutStack--distributionSpaceBetween":()=>s,"LayoutStack--md:alignStart":()=>_,"LayoutStack--md:directionRow":()=>f,"LayoutStack--md:distributionEven":()=>d,"LayoutStack--spacingExtraLarge":()=>p,"LayoutStack--spacingLarge":()=>v,"LayoutStack--spacingMedium":()=>h,"LayoutStack--spacingSmall":()=>y,"LayoutStack--wrap":()=>b});var r="slp_fcec57",o="slp_c33c9b",i="slp_931f00",l="slp_5a51c8",a="slp_1f002c",u="slp_6f1b0c",c="slp_1f8527",s="slp_6480c1",_="slp_a6ac18",f="slp_a640ea",d="slp_6c61e4",p="slp_33f387",v="slp_9e1bf9",h="slp_4f77b0",y="slp_39c850",b="slp_76b77a"},691:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(446),u=l(n(789));t.default=function(e){var t=e.children,n=e.size,r=void 0===n?"medium":n;return(0,a.h)({small:"h3",medium:"h2",large:"h1"}[r],{className:u.Heading},t)}},725:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=l(n(415));t.default=function(e){var t=e.className,n=void 0===t?"":t,r=e.children,o=e.variation,i=e.disabled,l=void 0!==i&&i,c=e.ariaLabel,s=e.onClick,_="primary"===o;return(0,a.jsx)("button",{className:"".concat(u.Button," ").concat(_?u["Button--primary"]:""," ").concat(n),disabled:l,"aria-label":c,onClick:s,children:r})}},727:(e,t,n)=>{n.r(t),n.d(t,{Fragment:()=>r.Fragment,jsx:()=>s,jsxAttr:()=>p,jsxDEV:()=>s,jsxEscape:()=>v,jsxTemplate:()=>_,jsxs:()=>s});var r=n(446);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=/["&<]/;function l(e){if(0===e.length||!1===i.test(e))return e;for(var t=0,n=0,r="",o="";n<e.length;n++){switch(e.charCodeAt(n)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}n!==t&&(r+=e.slice(t,n)),r+=o,t=n+1}return n!==t&&(r+=e.slice(t,n)),r}var a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,u=0,c=Array.isArray;function s(e,t,n,o,i,l){t||(t={});var a,c,s=t;if("ref"in s)for(c in s={},t)"ref"==c?a=t[c]:s[c]=t[c];var _={type:e,props:s,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--u,__i:-1,__u:0,__source:i,__self:l};if("function"==typeof e&&(a=e.defaultProps))for(c in a)void 0===s[c]&&(s[c]=a[c]);return r.options.vnode&&r.options.vnode(_),_}function _(e){var t=s(r.Fragment,{tpl:e,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var f={},d=/[A-Z]/g;function p(e,t){if(r.options.attr){var n=r.options.attr(e,t);if("string"==typeof n)return n}if("ref"===e||"key"===e)return"";if("style"===e&&"object"==o(t)){var i="";for(var u in t){var c=t[u];if(null!=c&&""!==c){var s="-"==u[0]?u:f[u]||(f[u]=u.replace(d,"-$&").toLowerCase()),_=";";"number"!=typeof c||s.startsWith("--")||a.test(s)||(_="px;"),i=i+s+":"+c+_}}return e+'="'+i+'"'}return null==t||!1===t||"function"==typeof t||"object"==o(t)?"":!0===t?e:e+'="'+l(t)+'"'}function v(e){if(null==e||"boolean"==typeof e||"function"==typeof e)return null;if("object"==o(e)){if(void 0===e.constructor)return e;if(c(e)){for(var t=0;t<e.length;t++)e[t]=v(e[t]);return e}}return l(""+e)}},789:(e,t,n)=>{n.r(t),n.d(t,{Heading:()=>r});var r="slp_8dbfc7"},834:(e,t,n)=>{n.r(t),n.d(t,{BodyTextWrapper:()=>r});var r="slp_13efdb"},844:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});var a=n(727),u=l(n(274));t.default=function(e){var t=e.children,n=e.className,r=void 0===n?"":n,o="".concat(u.ContentContainer," ").concat(r);return(0,a.jsx)("div",{className:o,children:t})}},907:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Text=t.LoadingOverlay=t.Link=t.LayoutStack=t.Icon=t.Heading=t.ContentContainer=t.Button=t.Banner=t.AppBlockContainer=void 0;var o=r(n(374));t.AppBlockContainer=o.default;var i=r(n(527));t.Banner=i.default;var l=r(n(725));t.Button=l.default;var a=r(n(844));t.ContentContainer=a.default;var u=r(n(691));t.Heading=u.default;var c=r(n(302));t.Icon=c.default;var s=r(n(432));t.LayoutStack=s.default;var _=r(n(581));t.Link=_.default;var f=r(n(6));t.LoadingOverlay=f.default;var d=r(n(84));t.Text=d.default},908:function(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),l=0;l<n.length;l++)"default"!==n[l]&&o(t,e,n[l]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BannerMessage=void 0;var u=n(727),c=n(282),s=n(929),_=n(907),f=a(n(463)),d=l(n(186)),p=function(e){var t=null==e?void 0:e.nextElementSibling;e&&t&&(e.style.height=window.getComputedStyle(t).lineHeight)};t.BannerMessage=function(e){var t=e.isGiftCard,n=e.isProductExcluded;return(0,u.jsx)(_.Banner,{children:t?"To prevent double points earning, Smile doesn't award points on gift card purchases. The points earning block won't be shown to your customers.":n?"This product is excluded from earning loyalty points. The points earning block won't be shown to your customers.":"The loyalty points program is disabled or you have no active order earning rules. The points earning block won't be shown to your customers."})};t.default=function(e){var n=e.isLoading,r=void 0!==n&&n,o=e.primaryColour,i=e.secondaryColour,l=e.shouldShowIcon,a=e.isPointsProgramEnabled,v=e.activeOnlineOrderEarningRules,h=e.activeActivityRuleBonuses,y=e.isInThemeEditor,b=e.productPrice,m=e.isGuest,g=e.canGuestsEarn,O=e.pointsLabelSingular,P=e.pointsLabelPlural,j=e.isGiftCard,w=e.targetProduct,S=e.excludedShopifyProductIds,k=e.previewScenario,x=e.shouldShowPointsLabel,L=e.pointsTextLoggedIn,M=e.pointsTextLoggedOut,C={"--primary-colour":o,"--secondary-colour":i},B=(0,c.filterActivityRuleBonuses)({activityRuleBonuses:h,filters:{endsAfter:new Date}})[0];if(B){var N=v.find((function(e){return e.id===(null==B?void 0:B.activityRuleId)}));N?v=[N]:B=null}var T=B?(0,s.estimatePointsEarningValue)({monetaryValue:b,activityRules:v}):null,D=(0,s.estimatePointsEarningValue)({monetaryValue:b,activityRules:v,activityRuleBonuses:B?[B]:[]}),R=w.id.toString(),E=S.includes(R);return a&&(r||v.length>0)&&!j&&!E?(0,u.jsx)("section",{className:d.PointsOnProductPage,style:C,children:(0,u.jsxs)(_.LayoutStack,{spacing:"medium",children:[l&&(0,u.jsx)("div",{ref:p,className:d.PointsOnProductPage__IconContainer,children:(0,u.jsx)(_.Icon,{name:"rewards/custom",colour:o,alt:""})}),(0,u.jsx)(_.LoadingOverlay,{isVisible:r,children:(0,u.jsx)(_.Text,{children:(0,u.jsx)(f.default,{isGuest:m,canGuestsEarn:g,earnablePoints:D,earnablePointsBeforeBonus:T,pointsLabelSingular:O,pointsLabelPlural:P,previewScenario:k,shouldShowPointsLabel:x,pointsTextLoggedIn:L,pointsTextLoggedOut:M})})})]})}):y?(0,u.jsx)(t.BannerMessage,{isGiftCard:j,isProductExcluded:E}):null}},929:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.estimatePointsEarningValue=t.formatPointsAmount=void 0;var r=n(282),o=n(54);t.formatPointsAmount=function(e){var t=e.pointsAmount,n=e.pointsLabelSingular,r=e.pointsLabelPlural,i=e.formatNumber;return"".concat(i(t)," ").concat((0,o.pluralise)({count:Number(t),singular:n,plural:r}))};t.estimatePointsEarningValue=function(e){var t=e.monetaryValue,n=e.activityRuleBonuses,o=e.activityRules;if(!o.length)return 0;var i=0,l=o.reduce((function(e,o){if("variable"===o.rewardValueType){var i=function(e,t,n){var o,i=n?(0,r.filterActivityRuleBonuses)({activityRuleBonuses:n,filters:{activityRuleId:t.id}})[0]:null,l=null!==(o=null==i?void 0:i.bonusOperand)&&void 0!==o?o:1;return Math.floor(e*t.multiplier)*l}(t,o,n);(!e||e>i)&&(e=i)}return e}),0);return l||(i=o.reduce((function(e,t){if("fixed"===t.rewardValueType){var o=function(e,t){var n,o,i=t?(0,r.filterActivityRuleBonuses)({activityRuleBonuses:t,filters:{activityRuleId:e.id}})[0]:null,l=null!==(n=null==i?void 0:i.bonusOperand)&&void 0!==n?n:1;return(null!==(o=e.reward.value)&&void 0!==o?o:0)*l}(t,n);(!e||e>o)&&(e=o)}return e}),0)),l||i}},940:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.triggerRender=function(e,t){var n=new CustomEvent("".concat(e,":preload-completed"),{detail:{render:function(e,n){(0,i.render)((0,o.jsx)(l.AppBlockContainer,{children:(0,o.jsx)(t,r({},n))}),e)}}});document.dispatchEvent(n)};var o=n(727),i=n(446),l=n(907)},956:(e,t,n)=>{n.r(t),n.d(t,{LoadingOverlay:()=>r,"LoadingOverlay--visible":()=>o,shimmer:()=>i});var r="slp_a1e93a",o="slp_96a4ba",i="slp_de8d6e"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(18)})();